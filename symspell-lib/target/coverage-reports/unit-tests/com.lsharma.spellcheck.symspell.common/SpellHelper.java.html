<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SpellHelper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">symspell-lib</a> &gt; <a href="index.source.html" class="el_package">com.lsharma.spellcheck.symspell.common</a> &gt; <span class="el_source">SpellHelper.java</span></div><h1>SpellHelper.java</h1><pre class="source lang-java linenums">
package com.lsharma.spellcheck.symspell.common;

import java.util.HashSet;
import java.util.List;
import java.util.Set;
import org.apache.commons.collections4.CollectionUtils;


public final class SpellHelper {

<span class="nc" id="L12">  private SpellHelper() {</span>
<span class="nc" id="L13">  }</span>

  /**
   * Generate delete string set  for the Key.
   */
  public static Set&lt;String&gt; getEditDeletes(String key,
      double maxEditDistance, int prefixLength) {
<span class="fc" id="L20">    Set&lt;String&gt; deletedWords = new HashSet&lt;&gt;();</span>
<span class="fc bfc" id="L21" title="All 2 branches covered.">    if (key.length() &lt;= maxEditDistance) {</span>
<span class="fc" id="L22">      deletedWords.add(&quot;&quot;);</span>
    }
<span class="fc bfc" id="L24" title="All 2 branches covered.">    if (key.length() &gt; maxEditDistance) {</span>
<span class="fc" id="L25">      deletedWords</span>
<span class="fc" id="L26">          .add(key.substring(0,</span>
<span class="fc bfc" id="L27" title="All 2 branches covered.">              prefixLength &lt; key.length() ? prefixLength : key.length()));</span>
    }
<span class="fc" id="L29">    return edits(key, 0, deletedWords, getEdistance(maxEditDistance, key.length()));</span>
  }

  private static Double getEdistance(double maxEditDistance, int length) {
<span class="fc" id="L33">    double factor = 0.3;</span>
<span class="fc" id="L34">    double computedEd = Math.round(factor * length);</span>
<span class="fc bfc" id="L35" title="All 2 branches covered.">    if (Math.min(maxEditDistance, computedEd) == maxEditDistance) {</span>
<span class="fc" id="L36">      return maxEditDistance;</span>
    }
<span class="fc" id="L38">    return computedEd;</span>
  }

  /**
   * Inexpensive and language independent: only deletes, no transposes + replaces + inserts replaces
   * and inserts are expensive and language dependent
   */
  public static Set&lt;String&gt; edits(String word, double editDistance, Set&lt;String&gt; deletedWords,
      final Double maxEd) {
<span class="fc" id="L47">    editDistance++;</span>
<span class="fc bfc" id="L48" title="All 2 branches covered.">    if (word.length() &lt; 1) {</span>
<span class="fc" id="L49">      return deletedWords;</span>
    }

<span class="fc bfc" id="L52" title="All 2 branches covered.">    for (int i = 0; i &lt; word.length(); i++) {</span>
<span class="fc" id="L53">      String delete = word.substring(0, i) + word.substring(i + 1, word.length());</span>
<span class="fc bfc" id="L54" title="All 4 branches covered.">      if (deletedWords.add(delete) &amp;&amp; editDistance &lt; maxEd) {</span>
<span class="fc" id="L55">        edits(delete, editDistance, deletedWords, maxEd);</span>
      }
    }
<span class="fc" id="L58">    return deletedWords;</span>
  }

  /**
   * Early exit method
   */
  public static List&lt;SuggestionItem&gt; earlyExit(List&lt;SuggestionItem&gt; suggestionItems,
      String phrase, double maxEditDistance) {
<span class="fc bfc" id="L66" title="All 2 branches covered.">    if (CollectionUtils.isNotEmpty(suggestionItems)) {</span>
<span class="fc" id="L67">      suggestionItems.add(new SuggestionItem(phrase, maxEditDistance + 1, 0));</span>
    }
<span class="fc" id="L69">    return suggestionItems;</span>
  }

  public static String[] tokenizeOnWhiteSpace(String word) {
<span class="fc" id="L73">    return word.split(&quot;\\s+&quot;);</span>
  }

  public static boolean isLessOrEqualDouble(double d1, double d2, final double threshold) {
<span class="pc bpc" id="L77" title="1 of 4 branches missed.">    return Math.abs(d1 - d2) &lt; threshold || d1 &lt; d2;</span>
  }

  public static boolean isLessDouble(double d1, double d2, final double threshold) {
<span class="pc bpc" id="L81" title="1 of 4 branches missed.">    return !isEqualDouble(d1, d2, threshold) &amp;&amp; d1 &lt; d2;</span>
  }


  public static boolean isEqualDouble(double d1, double d2, final double threshold) {
<span class="fc bfc" id="L86" title="All 2 branches covered.">    return Math.abs(d1 - d2) &lt; threshold;</span>
  }

  public static boolean continueConditionIfHeadIsSame(List&lt;SuggestionItem&gt; suggestions,
      List&lt;SuggestionItem&gt; suggestions1) {
<span class="fc bfc" id="L91" title="All 2 branches covered.">    return CollectionUtils.isEmpty(suggestions1)</span>
<span class="fc bfc" id="L92" title="All 2 branches covered.">        || (CollectionUtils.isNotEmpty(suggestions)</span>
<span class="pc bpc" id="L93" title="1 of 2 branches missed.">        &amp;&amp; CollectionUtils.isNotEmpty(suggestions1)</span>
<span class="fc bfc" id="L94" title="All 2 branches covered.">        &amp;&amp; suggestions.get(0).equals(suggestions1.get(0)));</span>
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.8.201612092310</span></div></body></html>